# Firebase Setup Instructions

## 1. Create Firebase Project

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Click "Add project" or select existing project
3. Enter project name: `PlatePilot` (or your preferred name)
4. Continue through the setup wizard

## 2. Add Android App to Firebase

1. In Firebase Console, click "Add app" → Android
2. Enter package name: `com.bodycalc.platepilot`
3. Download `google-services.json`
4. Place the file in: `app/google-services.json`

## 3. Enable Firebase Storage

1. In Firebase Console, go to "Build" → "Storage"
2. Click "Get Started"
3. Choose "Start in test mode" (you can secure it later)
4. Select a Cloud Storage location (closest to your users)
5. Click "Done"

## 4. Storage Rules (Optional - for production)

For now, test mode is fine. Later, update rules to:

```
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /meal_images/{imageId} {
      allow read: if true; // Public read access
      allow write: if false; // Disable public writes
    }
  }
}
```

## 5. Build Configuration

The app is already configured with Firebase Storage dependencies:

- `firebase-bom:32.7.0`
- `firebase-storage-ktx`

Just need to add `google-services.json` file.

## 6. Testing the Upload

1. Add `google-services.json` to `app/` folder
2. Run the app
3. Check Logcat for upload status:
   - Tag: `UploadMealImages` or `MainActivity`
   - Success: "✓ All images uploaded successfully!"
   - Check Firebase Console Storage to see uploaded images

## Image Upload Details

The app will upload these images on first launch:

**Chicken Tikka:**
- Card: `chicken_tikka_card.png` (2.6MB) → `meal_images/chicken_tikka_card.png`
- Detail: `chicken_tikka_detail.jpeg` (761KB) → `meal_images/chicken_tikka_detail.jpeg`

**Shrimp Tacos:**
- Card: `Shrimp Tacos_card.png` (2.9MB) → `meal_images/shrimp_tacos_card.png`
- Detail: `Shrimp Tacos_detail.png` (908KB) → `meal_images/shrimp_tacos_detail.png`

## Firebase Download URLs

After upload, the app will use these paths to load images:
- Images are loaded using `FirebaseImageManager.getImageUrl()`
- Loading is handled by `SmartMealImage` composable with Coil
- Cached locally after first download

## Current Status

✅ Images copied to `app/src/main/assets/`
✅ Upload utility created (`UploadMealImages.kt`)
✅ MainActivity configured to upload on first launch
✅ Database updated with cloud image meals
✅ SmartMealImage supports both local and Firebase images

⏳ **Pending:** Add `google-services.json` file from Firebase Console

## Once google-services.json is added:

1. Clean build: `./gradlew clean`
2. Build AAB: `./gradlew bundleRelease`
3. Install and run app
4. Check logs for upload confirmation
5. Verify images in Firebase Console Storage
